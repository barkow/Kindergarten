{"changed":true,"filter":false,"title":"child-details-page.js","tooltip":"/client/src/components/child-details-page/child-details-page.js","value":"define(['knockout', 'select2', 'text!./child-details-page.html', 'hasher', 'select2-ko-binding'], function(ko, select2, templateMarkup, hasher) {\n  function ChilddetailsPage(params) {\n    var self = this;\n    console.log(params);\n    self.id = params.route.childId;\n    self.familyId = params.route.familyId;\n    self.name = ko.observable(\"\");\n    self.vorname = ko.observable(\"\");\n    self.dateOfBirth = ko.observable();\n    self.emailContacts = ko.observableArray();\n    self.editMode = ko.observable(true);\n    self.availableTags = ko.observableArray();\n    self.tags = ko.observableArray();\n    \n    self.writeData = function(data){\n      self.name(data.name);\n      self.vorname(data.vorname);\n      self.emailContacts(data.emailkontakte);\n      self.dateOfBirth(data.geburtsdatum);\n      self.tags(data.schlagwoerter);\n    };\n    \n    self.getAvailableTags = function(){\n      self.availableTags.removeAll();\n      $.getJSON(\"/server/API/schlagwoerter\", function(data) { \n        $.each(data, function(index, tag){\n          self.availableTags.push(tag.bezeichnung);\n        });\n\t\t  });\n    };\n  \n    self.getChild = function(){\n      $.getJSON(\"/server/API/kinder/\"+self.id, self.writeData);\n\t  };\n\t  \n\t  self.closeClick = function(){\n\t    if(params.oldroute){\n\t      hasher.setHash(params.oldroute);\n\t    }\n\t  };\n\t  \n\t  self.saveClick = function(){\n\t    var data = JSON.stringify({name: self.name(), vorname: self.vorname(), geburtsdatum: self.dateOfBirth(), schlagwoerter: self.tags()});\n\t    //Wenn id gesetzt ist, dann muss ein Update durchgeführt werden, sonst ein Create\n\t    if (self.id){\n\t      $.ajax({\n\t        url: \"/server/API/familien/\"+self.familyId+'/kinder/'+self.id,\n\t        type: \"PUT\",\n\t        dataType: 'json',\n\t        data: data\n        }).done(function(data) {\n          self.editMode(false);\n          self.writeData(data);\n        });\n\t    }\n\t    else{\n\t      $.ajax({\n\t        url: \"/server/API/familien/\"+self.familyId+'/kinder',\n\t        type: \"POST\",\n\t        dataType: 'json',\n\t        data: data\n        }).done(function() {\n          self.closeClick();\n        });\n\t    }\n\t  };\n\t  \n\t  self.deleteChild = function(){\n\t    if(self.id){\n\t      if(confirm(\"Soll Kind \" + self.name() + \" wirklich gelöscht werden\")){\n  \t      $.ajax({\n  \t        url: \"/server/API/familien/\"+self.familyId+'/kinder/'+self.id,\n  \t        type: \"DELETE\"\n          }).done(function() {\n            self.closeClick();\n          });\n\t      }\n\t    }\n\t  };\n\t  \n\t  self.getAvailableTags();\n\t  //Wenn id gesetzt ist, soll ein bestehendes Kind bearbeitet werden\n\t  if (self.id){\n\t    self.editMode(false);\n\t    self.getChild();\n\t  }\n  }\n\n  // This runs when the component is torn down. Put here any logic necessary to clean up,\n  // for example cancelling setTimeouts or disposing Knockout subscriptions/computeds.\n  ChilddetailsPage.prototype.dispose = function() { };\n  \n  return { viewModel: ChilddetailsPage, template: templateMarkup };\n\n});\n","undoManager":{"mark":97,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":37,"column":14},"end":{"row":37,"column":15},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":15},"end":{"row":37,"column":16},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":20},"end":{"row":37,"column":21},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":21},"end":{"row":37,"column":22},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":22},"end":{"row":37,"column":23},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":23},"end":{"row":37,"column":24},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":24},"end":{"row":37,"column":25},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":25},"end":{"row":37,"column":26},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":26},"end":{"row":37,"column":27},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":27},"end":{"row":37,"column":28},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":28},"end":{"row":37,"column":29},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":29},"end":{"row":37,"column":30},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":30},"end":{"row":37,"column":38},"action":"insert","lines":["oldroute"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":38},"end":{"row":37,"column":39},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":39},"end":{"row":38,"column":0},"action":"insert","lines":["",""]},{"start":{"row":38,"column":0},"end":{"row":38,"column":7},"action":"insert","lines":["\t      "]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":7},"end":{"row":38,"column":8},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":8},"end":{"row":38,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":9},"end":{"row":38,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":10},"end":{"row":38,"column":11},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":11},"end":{"row":38,"column":12},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":12},"end":{"row":38,"column":13},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":13},"end":{"row":38,"column":14},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":14},"end":{"row":38,"column":15},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":15},"end":{"row":38,"column":16},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":16},"end":{"row":38,"column":17},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":17},"end":{"row":38,"column":18},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":18},"end":{"row":38,"column":19},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":19},"end":{"row":38,"column":20},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":20},"end":{"row":38,"column":21},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":21},"end":{"row":38,"column":22},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":22},"end":{"row":38,"column":23},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":23},"end":{"row":38,"column":25},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":24},"end":{"row":38,"column":25},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":25},"end":{"row":38,"column":26},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":26},"end":{"row":38,"column":27},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":27},"end":{"row":38,"column":28},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":28},"end":{"row":38,"column":29},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":29},"end":{"row":38,"column":30},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":29},"end":{"row":38,"column":30},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":28},"end":{"row":38,"column":29},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":28},"end":{"row":38,"column":29},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":29},"end":{"row":38,"column":30},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":30},"end":{"row":38,"column":31},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":31},"end":{"row":38,"column":32},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":32},"end":{"row":38,"column":33},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":33},"end":{"row":38,"column":34},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":34},"end":{"row":38,"column":35},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":35},"end":{"row":38,"column":36},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":36},"end":{"row":38,"column":37},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":37},"end":{"row":38,"column":38},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":38},"end":{"row":38,"column":39},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":40},"end":{"row":38,"column":41},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":7},"end":{"row":37,"column":8},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":8},"end":{"row":37,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":65},"end":{"row":0,"column":67},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":67},"end":{"row":0,"column":68},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":68},"end":{"row":0,"column":69},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":66},"end":{"row":0,"column":67},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":67},"end":{"row":0,"column":68},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":68},"end":{"row":0,"column":69},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":69},"end":{"row":0,"column":70},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":66},"end":{"row":0,"column":70},"action":"remove","lines":["cros"]},{"start":{"row":0,"column":66},"end":{"row":0,"column":76},"action":"insert","lines":["crossroads"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":138},"end":{"row":0,"column":139},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":139},"end":{"row":0,"column":140},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":140},"end":{"row":0,"column":141},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":141},"end":{"row":0,"column":142},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":142},"end":{"row":0,"column":143},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":143},"end":{"row":0,"column":144},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":140},"end":{"row":0,"column":144},"action":"remove","lines":["cros"]},{"start":{"row":0,"column":140},"end":{"row":0,"column":150},"action":"insert","lines":["crossroads"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":66},"end":{"row":0,"column":76},"action":"remove","lines":["crossroads"]},{"start":{"row":0,"column":66},"end":{"row":0,"column":67},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":67},"end":{"row":0,"column":68},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":68},"end":{"row":0,"column":69},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":69},"end":{"row":0,"column":70},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":70},"end":{"row":0,"column":71},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":71},"end":{"row":0,"column":72},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":136},"end":{"row":0,"column":146},"action":"remove","lines":["crossroads"]},{"start":{"row":0,"column":136},"end":{"row":0,"column":137},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":137},"end":{"row":0,"column":138},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":138},"end":{"row":0,"column":139},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":139},"end":{"row":0,"column":140},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":140},"end":{"row":0,"column":141},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":141},"end":{"row":0,"column":142},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":142},"end":{"row":0,"column":143},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":136},"end":{"row":0,"column":137},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":7},"end":{"row":38,"column":17},"action":"remove","lines":["crossroads"]},{"start":{"row":38,"column":7},"end":{"row":38,"column":8},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":7},"end":{"row":38,"column":8},"action":"remove","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":7},"end":{"row":38,"column":8},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":8},"end":{"row":38,"column":9},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":9},"end":{"row":38,"column":10},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":10},"end":{"row":38,"column":11},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":11},"end":{"row":38,"column":12},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":12},"end":{"row":38,"column":13},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":14},"end":{"row":38,"column":19},"action":"remove","lines":["parse"]},{"start":{"row":38,"column":14},"end":{"row":38,"column":15},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":15},"end":{"row":38,"column":16},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":16},"end":{"row":38,"column":17},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":17},"end":{"row":38,"column":18},"action":"insert","lines":["H"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":18},"end":{"row":38,"column":19},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":19},"end":{"row":38,"column":20},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":20},"end":{"row":38,"column":21},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":7},"end":{"row":37,"column":41},"action":"remove","lines":["//location.href = params.oldroute;"]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":0},"end":{"row":37,"column":7},"action":"remove","lines":["\t      "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":25},"end":{"row":37,"column":0},"action":"remove","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":6},"end":{"row":3,"column":6},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":25,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1420208512580}